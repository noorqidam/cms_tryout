(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0afdbe"],{"0fb4":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-body"},[a("form",{on:{submit:function(t){return t.preventDefault(),e._actionStored(t)}}},[a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-sm-4",attrs:{for:""}},[e._v(" Nama Ujian ")]),a("div",{staticClass:"col-sm-8"},[e._v("\n              "+e._s(e.ujian.judul_ujian)+"\n            ")])]),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-sm-4",attrs:{for:""}},[e._v(" Premium ")]),a("div",{staticClass:"col-sm-8"},[e.ujian.is_premium?a("span",{staticClass:"badeg badge-success"},[e._v(" Premium ")]):a("span",{staticClass:"badge badge-primary font-xl"},[e._v(" Free ")])])]),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-sm-4",attrs:{for:""}},[e._v(" Tipe Ujian ")]),a("div",{staticClass:"col-sm-8"},[e._v("\n              "+e._s(e.ujian.type_ujian)+"\n            ")])]),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-sm-4",attrs:{for:""}},[e._v(" Penyelenggara Ujian ")]),a("div",{staticClass:"col-sm-8"},[e._v("\n              "+e._s(e.ujian.penyelenggara)+"\n            ")])]),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-sm-4",attrs:{for:""}},[e._v(" Sesi Ujian ")]),a("div",{staticClass:"col-sm-8"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.Form.sesi_ujian,expression:"Form.sesi_ujian"}],staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:e.Form.sesi_ujian},on:{input:function(t){t.target.composing||e.$set(e.Form,"sesi_ujian",t.target.value)}}})])]),e._m(0)])])])]),a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-body"},[a("b-table",{attrs:{"show-empty":"",small:"","sticky-header":"","head-variant":"dark",responsive:"",items:e.SoalUjian,fields:e.attribute},scopedSlots:e._u([{key:"cell(No)",fn:function(t){return[e._v("\n            "+e._s(t.index+1)+"\n          ")]}},{key:"cell(soal)",fn:function(t){return[t.item.value.soal_text?a("div",[a("p",{domProps:{innerHTML:e._s(t.item.value.soal_text)}})]):e._e()]}},{key:"cell(images)",fn:function(t){return[t.item.value.soal_image?a("div",[t.item.value.soal_image?a("img",{directives:[{name:"lazy",rawName:"v-lazy.container",value:e.pathImagesQ+t.item.value.soal_image,expression:"pathImagesQ + data.item.value.soal_image",modifiers:{container:!0}}],staticStyle:{heigth:"60pxwidth:auto","max-width":"200px"},attrs:{alt:t.item.value.soal_image,srcset:""}}):e._e()]):e._e()]}},{key:"cell(category_id)",fn:function(t){return[t.item.value.category_id?a("div",[a("p",{domProps:{innerHTML:e._s(t.item.value.category_id)}})]):e._e()]}},{key:"cell(matpel_id)",fn:function(t){return[t.item.value.matpel_id?a("div",[a("p",{domProps:{innerHTML:e._s(t.item.value.matpel_id)}})]):e._e()]}},{key:"cell(type_soal)",fn:function(t){return[t.item.value.type_soal?a("div",[a("p",{domProps:{innerHTML:e._s(t.item.value.type_soal)}})]):e._e()]}},{key:"cell(publisher_id)",fn:function(t){return[t.item.value.publisher_id?a("div",[a("p",{domProps:{innerHTML:e._s(t.item.value.publisher_id)}})]):e._e()]}},{key:"cell(actions)",fn:function(e){return[a("b-button",{attrs:{size:"sm"},on:{click:e.toggleDetails}},[a("i",{staticClass:"fa fa-angle-down"})])]}},{key:"cell(deleted)",fn:function(t){return[a("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:function(a){return e.deleteIndexDbkey(t.item)}}},[a("i",{staticClass:"fa fa-trash-o"})])]}},{key:"row-details",fn:function(t){return[t.item.value.jawabans.length>0?a("b-card",[a("ol",{attrs:{type:"A"}},e._l(t.item.value.jawabans,(function(t,n){return a("li",{key:n},[a("label",{domProps:{innerHTML:e._s(t.jawaban_text)}}),e._v(" (point\n                  "),a("span",{staticClass:"badge badge-light"},[e._v(" "+e._s(t.point)+" ")]),e._v(" )\n                ")])})),0)]):a("b-card",[e._v("\n              Tidak ada pilihan jawaban\n            ")])]}},{key:"table-busy",fn:function(){return[a("div",{staticClass:"text-center text-dark my-2"},[a("b-spinner",{staticClass:"align-middle",attrs:{variant:"dark",type:"grow",label:"Loading .."}}),e._v("\n              Loading ..\n            ")],1)]},proxy:!0}])})],1)])])])},s=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"form-group row justify-content-center"},[a("div",{staticClass:"col-md-3"},[a("button",{staticClass:"btn btn-block btn-primary"},[a("i",{staticClass:"fa fa-save"})])])])}],i=(a("ac6a"),a("96cf"),a("3b8d")),r={name:"AddSoalUjian",data:function(){return{items:[],SoalUjian:[],Form:{},ujian:{},currentPage:1,perPage:100,totalRows:0,isLoading:!1,token:null,pathImages:"https://storage.googleapis.com/edutore-cdn/public/module/thumb/",pathImagesQ:"https://storage.googleapis.com/edutore-cdn/public/soal/question/",pathImagesAnswer:"https://storage.googleapis.com/edutore-cdn/public/soal/answer_choice/",db:null,attribute:["No",{key:"soal",label:"Soal text",sortable:!0,sortDirection:"desc"},{key:"images",label:"Soal Image",sortable:!0,class:"text-center"},{key:"type_soal",label:"Tipe Soal",sortable:!0,class:"text-center"},{key:"category_id",label:"Kategory",sortable:!0,class:"text-center"},{key:"matpel_id",label:"Mata pelajaran",sortable:!0,class:"text-center"},{key:"type_soal",label:"Tipe Soal",sortable:!0,class:"text-center"},{key:"publisher_id",label:"Publisher",sortable:!0,class:"text-center"},{key:"actions",label:"Actions"},{key:"deleted",label:"Hapus"}]}},mounted:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.token=sessionStorage.getItem("session_token"),t=this.$route.query._id,this._actionGetUjianByid(t),e.next=5,this.getDb();case 5:this.db=e.sent;case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{_actionGetUjianByid:function(e){var t=this;this.$axios.get("publisher-ujian/".concat(e),{headers:{"x-access-token":this.token}}).then((function(e){var a=e.data;"true"===e.data.success&&(t.ujian=a.data),t.isLoading=!1})).catch((function(e){console.log(e),t.isLoading=!1}))},_actionStored:function(){var e=this,t=[];this.SoalUjian.forEach((function(e){t.push(e.value)}));var a={ujian_id:this.ujian._id,duration:this.Form.duration,sesi_ujian:this.Form.sesi_ujian,soal:t};console.log(a),this.$axios.post("publisher-soal-ujian",a,{headers:{"x-access-token":this.token}}).then((function(t){e.$notify({group:"foo",type:"success",title:"Success ",text:t.data.message}),e.deleteStoreDb(),e.$router.push({path:"/p/ujian/ujian-detail",query:{_id:e.ujian._id}})})).catch((function(t){console.log(t),e.$notify({group:"foo",title:"Opps !",text:"Something Wrong"})}))},getDb:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,a){var n=window.indexedDB.open("Ujian",3);window.indexedDB||alert("Browser anda tidak mendukung IndexDB"),n.onerror=function(e){console.log("Error opening DB",e),a("Error")},n.onsuccess=function(a){console.log("Success Open DB"),e(a.target.result);var s=n.result,i=s.transaction("ujian","readwrite"),r=i.objectStore("ujian");t.coutIndexDb(r),t.listSoalCart(r)},n.onupgradeneeded=function(e){console.log("onupgradeneeded");var t=e.target.result;if(!t.objectStoreNames.contains("ujian")){var a=t.createObjectStore("ujian",{autoIncrement:!0,keyPath:"id"});a.createIndex("soal_id","soal_id",{unique:!0})}}})));case 1:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),coutIndexDb:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log("count indexDB"),a=this,n=t.count(),n.onsuccess=function(){console.log(n.result),a.totalCart=n.result};case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),listSoalCart:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=this,t.openCursor().onsuccess=function(e){var t=e.target.result;t?(a.SoalUjian.push(t.value),t.continue(),console.log("print value "+t.value)):console.log("No more entries!")};case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),deleteIndexDbkey:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var a,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log(t),a=t.id,n=this.db.transaction("ujian","readwrite"),n.onerror=function(e){console.log("Error",e)},n.oncomplete=function(e){console.log(e)},s=n.objectStore("ujian"),s.delete(a),this.SoalUjian=[],this.listSoalCart(s);case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),deleteStoreDb:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,a){var n=t.db.transaction(["ujian"],"readwrite");n.onerror=function(e){console.log("Error",e),a("Error")},n.oncomplete=function(t){console.log(t),e()};var s=n.objectStore("ujian");s.clear()})));case 1:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()}},o=r,l=a("2877"),c=Object(l["a"])(o,n,s,!1,null,"ff3a1c0c",null);t["default"]=c.exports}}]);
//# sourceMappingURL=chunk-2d0afdbe.82a1c8d2.js.map