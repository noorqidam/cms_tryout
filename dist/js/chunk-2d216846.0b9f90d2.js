(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d216846"],{c399:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-body"},[a("form",{on:{submit:function(e){return e.preventDefault(),t._actionStored(e)}}},[a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-sm-4",attrs:{for:""}},[t._v(" Nama Ujian ")]),a("div",{staticClass:"col-sm-8"},[t._v("\n              "+t._s(t.ujian.judul_ujian)+"\n            ")])]),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-sm-4",attrs:{for:""}},[t._v(" Premium ")]),a("div",{staticClass:"col-sm-8"},[t.ujian.is_premium?a("span",{staticClass:"badeg badge-success"},[t._v(" Premium ")]):a("span",{staticClass:"badge badge-primary font-xl"},[t._v(" Free ")])])]),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-sm-4",attrs:{for:""}},[t._v(" Tipe Ujian ")]),a("div",{staticClass:"col-sm-8"},[t._v("\n              "+t._s(t.ujian.type_ujian)+"\n            ")])]),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-sm-4",attrs:{for:""}},[t._v(" Penyelenggara Ujian ")]),a("div",{staticClass:"col-sm-8"},[t._v("\n              "+t._s(t.ujian.penyelenggara)+"\n            ")])]),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-sm-4",attrs:{for:""}},[t._v(" Sesi Ujian ")]),a("div",{staticClass:"col-sm-8"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.Form.sesi_ujian,expression:"Form.sesi_ujian"}],staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:t.Form.sesi_ujian},on:{input:function(e){e.target.composing||t.$set(t.Form,"sesi_ujian",e.target.value)}}})])]),t._m(0)])])])]),a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-body"},[a("table",{staticClass:"table table-sm table-bordered table-striped table-hover"},[t._m(1),a("tbody",{staticStyle:{color:"black"}},[t._l(t.ujians,(function(e,n){return[a("tr",{key:e.id},[a("td",[t._v(t._s((t.currentPage-1)*t.perPage+ ++n))]),a("td",[a("p",{domProps:{innerHTML:t._s(e.value.soal_text)}})]),a("td",[e.value.soal_image?a("img",{directives:[{name:"lazy",rawName:"v-lazy.container",value:t.pathImagesQ+e.value.soal_image,expression:"pathImagesQ + soal.value.soal_image",modifiers:{container:!0}}],staticStyle:{heigth:"60pxwidth:auto","max-width":"200px"},attrs:{alt:e.value.soal_image,srcset:""}}):t._e()]),a("td",[t._v(t._s(e.value.type_soal))]),a("td",[t._v(t._s(e.value.category_id))]),a("td",[t._v(t._s(e.value.matpel_id))]),a("td",[t._v(t._s(e.value.publisher_id))]),a("td",[a("button",{staticClass:"btn btn-sm btn-danger",on:{click:function(a){return t.deleteIndexedDbByKey(e)}}},[a("i",{staticClass:"fa fa-trash"})])])])]}))],2)])])])])])},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form-group row justify-content-center"},[a("div",{staticClass:"col-md-3"},[a("button",{staticClass:"btn btn-block btn-primary"},[a("i",{staticClass:"fa fa-save"})])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("No")]),a("th",[t._v("Soal Text")]),a("th",[t._v("Soal Image")]),a("th",[t._v("Tipe Soal")]),a("th",[t._v("Category")]),a("th",[t._v("Matapelajaran")]),a("th",[t._v("Publisher")]),a("th",[t._v("Action")])])])}],s=(a("ac6a"),a("96cf"),a("3b8d")),o={name:"AddSoalUjian",data:function(){return{items:[],Form:{},ujian:{},currentPage:1,perPage:100,totalRows:0,isLoading:!1,token:null,pathImages:"https://storage.googleapis.com/edutore-cdn/public/module/thumb/",pathImagesQ:"https://storage.googleapis.com/edutore-cdn/public/soal/question/",pathImagesAnswer:"https://storage.googleapis.com/edutore-cdn/public/soal/answer_choice/",errors_message:null,id_ujian:null,db:null,ujians:null,DB_NAME:"tryout",DB_VERSION:3,totalCart:0}},created:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getDb();case 2:return this.db=t.sent,t.next=5,this._actionGetStoreQuiz();case 5:this.ujians=t.sent;case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),mounted:function(){this.token=sessionStorage.getItem("session_token");var t=this.$route.query._id;this.id_ujian=t,this._actionGetUjianByid(t),this._actionGetSoalByUjianId()},methods:{_actionGetUjianByid:function(t){var e=this;this.$axios.get("ujian/"+t,{headers:{"x-access-token":this.token}}).then((function(t){var a=t.data;"true"===t.data.success&&(e.ujian=a.data),e.isLoading=!1})).catch((function(t){console.log(t),e.isLoading=!1}))},_actionGetSoalByUjianId:function(){var t=localStorage.getItem("soal");this.items=JSON.parse(t)},_actionStored:function(){var t=this,e=[];this.ujians.forEach((function(t){e.push(t.value)}));var a={ujian_id:this.ujian._id,sesi_ujian:this.Form.sesi_ujian,soal:e};console.log(a),this.$axios.post("soal-ujian",a,{headers:{"x-access-token":this.token}}).then((function(e){t.$notify({group:"foo",title:"Success Add ",text:e.data.message}),t.deleteStoreDb(),t.$router.push({path:"/ujian/ujian-detail/"+t.id_ujian})})).catch((function(e){console.log(e),t.$notify({group:"foo",title:"Opps !",text:e.response.data})}))},_actionGetStoreQuiz:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,a){var n=e.db.transaction(["ujians"],"readonly");n.onerror=function(t){console.log("Error",t),a("Error")},n.oncomplete=function(e){console.log(e),t(s)};var r=n.objectStore("ujians"),s=[];r.openCursor().onsuccess=function(t){var e=t.target.result;e&&(s.push(e.value),e.continue(),console.log(s))}})));case 1:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}(),deleteIndexedDbByKey:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){var a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e.id,n=this.db.transaction("ujians","readwrite"),n.onerror=function(t){console.log("Error",t)},n.oncomplete=function(t){console.log(t)},r=n.objectStore("ujians"),r.delete(a),this.ujians=[],this.listSoalFromCart(r);case 8:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),deleteStoreDb:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,a){var n=e.db.transaction(["ujians"],"readwrite");n.onerror=function(t){console.log("Error",t),a("Error")},n.oncomplete=function(e){console.log(e),t()};var r=n.objectStore("ujians");r.clear()})));case 1:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}(),listSoalFromCart:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=this,e.openCursor().onsuccess=function(t){var e=t.target.result;e?(a.ujians.push(e.value),e.continue(),console.log("print value "+e.value)):console.log("No more entries")};case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),getDb:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,a){var n=window.indexedDB.open(e.DB_NAME,e.DB_VERSION);n.onerror=function(t){console.log("Error opening DB",t),a("Error")},n.onsuccess=function(e){console.log("Success Open DB 2 cart ujian"),t(e.target.result)},n.onupgradeneeded=function(t){console.log("onupgradeneeded");var e=t.target.result;if(!e.objectStoreNames.contains("ujians")&&!e.objectStoreNames.contains("quizs")){var a=e.createObjectStore("ujians",{autoIncrement:!0,keyPath:"id"}),n=e.createObjectStore("quizs",{autoIncrement:!0,keyPath:"id"});a.createIndex("ujian_id","ujian_id",{unique:!0}),n.createIndex("quiz_id","quiz_id",{unique:!0})}}})));case 1:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()}},i=o,c=a("2877"),u=Object(c["a"])(i,n,r,!1,null,"73468aba",null);e["default"]=u.exports}}]);
//# sourceMappingURL=chunk-2d216846.0b9f90d2.js.map