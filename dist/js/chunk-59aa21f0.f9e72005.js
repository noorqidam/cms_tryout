(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-59aa21f0"],{3846:function(e,t,a){a("9e1e")&&"g"!=/./g.flags&&a("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:a("0bfb")})},5324:function(e,t,a){"use strict";var s=a("c3f5"),i=a.n(s);i.a},"6b54":function(e,t,a){"use strict";a("3846");var s=a("cb7c"),i=a("0bfb"),r=a("9e1e"),n="toString",o=/./[n],l=function(e){a("2aba")(RegExp.prototype,n,e,!0)};a("79e5")((function(){return"/a/b"!=o.call({source:"a",flags:"b"})}))?l((function(){var e=s(this);return"/".concat(e.source,"/","flags"in e?e.flags:!r&&e instanceof RegExp?i.call(e):void 0)})):o.name!=n&&l((function(){return o.call(this)}))},a481:function(e,t,a){"use strict";var s=a("cb7c"),i=a("4bf8"),r=a("9def"),n=a("4588"),o=a("0390"),l=a("5f1b"),c=Math.max,u=Math.min,d=Math.floor,p=/\$([$&`']|\d\d?|<[^>]*>)/g,h=/\$([$&`']|\d\d?)/g,f=function(e){return void 0===e?e:String(e)};a("214f")("replace",2,(function(e,t,a,v){return[function(s,i){var r=e(this),n=void 0==s?void 0:s[t];return void 0!==n?n.call(s,r,i):a.call(String(r),s,i)},function(e,t){var i=v(a,e,this,t);if(i.done)return i.value;var d=s(e),p=String(this),h="function"===typeof t;h||(t=String(t));var g=d.global;if(g){var b=d.unicode;d.lastIndex=0}var _=[];while(1){var y=l(d,p);if(null===y)break;if(_.push(y),!g)break;var w=String(y[0]);""===w&&(d.lastIndex=o(p,r(d.lastIndex),b))}for(var k="",x=0,C=0;C<_.length;C++){y=_[C];for(var S=String(y[0]),P=c(u(n(y.index),p.length),0),F=[],R=1;R<y.length;R++)F.push(f(y[R]));var A=y.groups;if(h){var G=[S].concat(F,P,p);void 0!==A&&G.push(A);var j=String(t.apply(void 0,G))}else j=m(S,p,P,F,A,t);P>=x&&(k+=p.slice(x,P)+j,x=P+S.length)}return k+p.slice(x)}];function m(e,t,s,r,n,o){var l=s+e.length,c=r.length,u=h;return void 0!==n&&(n=i(n),u=p),a.call(o,u,(function(a,i){var o;switch(i.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,s);case"'":return t.slice(l);case"<":o=n[i.slice(1,-1)];break;default:var u=+i;if(0===u)return a;if(u>c){var p=d(u/10);return 0===p?a:p<=c?void 0===r[p-1]?i.charAt(1):r[p-1]+i.charAt(1):a}o=r[u-1]}return void 0===o?"":o}))}}))},c3f5:function(e,t,a){},fd69:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-2 card p-0 fixed",staticStyle:{"max-height":"700px"}},[a("form",[e._m(0),a("div",{staticClass:"col-sm-12",staticStyle:{"max-height":"220px",overflow:"auto"}},[e.GroupPublisher?a("div",e._l(e.GroupPublisher,(function(t){return a("div",{key:t._id,staticClass:"margin:0;float:left"},[a("li",{staticStyle:{"list-style":"none",left:"0"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.Filterspublishers,expression:"Filterspublishers"}],attrs:{type:"checkbox"},domProps:{value:t._id,checked:Array.isArray(e.Filterspublishers)?e._i(e.Filterspublishers,t._id)>-1:e.Filterspublishers},on:{change:[function(a){var s=e.Filterspublishers,i=a.target,r=!!i.checked;if(Array.isArray(s)){var n=t._id,o=e._i(s,n);i.checked?o<0&&(e.Filterspublishers=s.concat([n])):o>-1&&(e.Filterspublishers=s.slice(0,o).concat(s.slice(o+1)))}else e.Filterspublishers=r},e._actionFilter]}}),e._v("\n                  "+e._s(t._id)+" ("+e._s(t.count)+")\n                ")])])})),0):a("div",[e._v("\n              Tidak ada Publishers\n            ")])]),a("hr"),e._m(1),a("div",{staticClass:"ml-1 mb-2"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.Filter,expression:"Filter"}],attrs:{type:"text"},domProps:{value:e.Filter},on:{input:function(t){t.target.composing||(e.Filter=t.target.value)}}})]),a("div",{staticClass:"col-sm-12",staticStyle:{"max-height":"250px",overflow:"auto"}},[e.filteredList?a("div",e._l(e.filteredList,(function(t){return a("div",{key:t._id},[a("li",{staticStyle:{"list-style":"none"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.matpel,expression:"matpel"}],attrs:{type:"checkbox"},domProps:{value:t._id,checked:Array.isArray(e.matpel)?e._i(e.matpel,t._id)>-1:e.matpel},on:{change:[function(a){var s=e.matpel,i=a.target,r=!!i.checked;if(Array.isArray(s)){var n=t._id,o=e._i(s,n);i.checked?o<0&&(e.matpel=s.concat([n])):o>-1&&(e.matpel=s.slice(0,o).concat(s.slice(o+1)))}else e.matpel=r},e._actionFilter]}}),e._v("\n                  "+e._s(t._id)+" ("+e._s(t.count)+")\n                ")])])})),0):a("div",[e._v("\n              Tidak ada Mata Pelajaran\n            ")])]),a("hr"),e._m(2),a("div",{staticClass:"col-md-12",staticStyle:{"max-height":"130px",overflow:"auto"}},[e.GroupLevel?a("div",e._l(e.GroupLevel,(function(t){return a("div",{key:t._id,staticStyle:{"margin-left":"0"}},[a("li",{staticStyle:{"list-style":"none"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.level,expression:"level"}],attrs:{type:"checkbox"},domProps:{value:t._id,checked:Array.isArray(e.level)?e._i(e.level,t._id)>-1:e.level},on:{change:[function(a){var s=e.level,i=a.target,r=!!i.checked;if(Array.isArray(s)){var n=t._id,o=e._i(s,n);i.checked?o<0&&(e.level=s.concat([n])):o>-1&&(e.level=s.slice(0,o).concat(s.slice(o+1)))}else e.level=r},e._actionFilter]}}),e._v("\n                  "+e._s(t._id)+" ("+e._s(t.count)+")\n                ")])])})),0):a("div",[e._v("\n              Tidak ada Kategori\n            ")])]),a("hr"),e._m(3),a("div",{staticClass:"col-md-12"},e._l(e.GroupType,(function(t){return a("div",{key:t.name,staticStyle:{"margin-left":"0"}},[a("li",{staticStyle:{"list-style":"none"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.type,expression:"type"}],attrs:{type:"radio",id:t.name},domProps:{value:t.name,checked:e._q(e.type,t.name)},on:{change:function(a){e.type=t.name}}}),e._v("\n                "+e._s(t.label)+"\n              ")])])})),0)])]),a("div",{staticClass:"col-md-10"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-body"},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"form-group row"},[a("div",{staticClass:"col-sm"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.search,expression:"search"}],staticClass:"form-control form-control-sm",attrs:{type:"text",placeholder:"Cari disini"},domProps:{value:e.search},on:{input:function(t){t.target.composing||(e.search=t.target.value)}}})]),a("div",{staticClass:"col-sm-auto"},[a("router-link",{staticClass:"btn btn-sm btn-default",attrs:{to:{path:"/cart-soal-quiz",query:{_id:e.quiz_id}}}},[e._v("\n                    Cart Soal\n                    "),a("i",{staticClass:"fa fa-cart-arrow-down"}),a("span",{staticClass:"badge badge-pill badge-success"},[e._v(" "+e._s(e.totalCart))])])],1)]),e.selected.length>0?a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-3"},[e._v("\n                  Di Pilih "),a("b",[e._v(" "+e._s(e.selected.length)+" ")]),a("button",{staticClass:"btn btn-sm btn-success",on:{click:e._actionStoredIndexedDb}},[a("i",{staticClass:"fa fa-send"}),e._v(" Proses\n                  ")])]),a("div",{staticClass:"col-sm-2"},[a("button",{staticClass:"btn btn-sm btn-danger",on:{click:e.clearSelected}},[a("i",{staticClass:"fa fa-times"})])])]):e._e()]),a("div",{staticClass:"row justify-content-end"},[a("div",{staticClass:"col-sm-auto"},[a("label",{staticClass:"text-bold",attrs:{for:""}},[e._v("\n                  Total Soal "),a("b",[e._v(" "+e._s(e._formatPrice(e.totalRows))+" ")])])])]),a("div",[a("b-table",{ref:"selectableTable",attrs:{selectable:"","select-mode":e.selectMode,"show-empty":"",small:"","sticky-header":"","head-variant":"dark",responsive:"",items:e.items,fields:e.attribute,"current-page":e.currentPage,filter:e.filter,"filter-included-fields":e.filterOn,"sort-by":e.sortBy,"sort-desc":e.sortDesc,"sort-direction":e.sortDirection,busy:e.isBusy},on:{"update:sortBy":function(t){e.sortBy=t},"update:sort-by":function(t){e.sortBy=t},"update:sortDesc":function(t){e.sortDesc=t},"update:sort-desc":function(t){e.sortDesc=t},"row-selected":e.onRowSelected,filtered:e.onFiltered},scopedSlots:e._u([{key:"cell(No)",fn:function(t){return[e._v("\n                  "+e._s(t.index+1+(e.currentPage-1)*e.perPage)+"\n                ")]}},{key:"cell(soal)",fn:function(t){return[t.item.soal_text?a("div",[a("p",{domProps:{innerHTML:e._s(t.item.soal_text)}})]):e._e()]}},{key:"cell(images)",fn:function(t){return[t.item.soal_image?a("div",[t.item.soal_image?a("img",{directives:[{name:"lazy",rawName:"v-lazy.container",value:e.pathImagesQ+t.item.soal_image,expression:"pathImagesQ + data.item.soal_image",modifiers:{container:!0}}],staticStyle:{heigth:"60pxwidth:auto","max-width":"200px"},attrs:{alt:t.item.soal_image,srcset:""}}):e._e()]):e._e()]}},{key:"cell(free)",fn:function(t){return[a("div",[t.item.free_trial?a("span",{staticClass:"badge badge-success"},[e._v(" Trial ")]):a("span",{staticClass:"badge badge-danger"},[e._v(" Non Trial ")])])]}},{key:"cell(actions)",fn:function(e){return[a("b-button",{attrs:{size:"sm"},on:{click:e.toggleDetails}},[a("i",{staticClass:"fa fa-angle-down"})])]}},{key:"row-details",fn:function(t){return[t.item.jawabans.length>0?a("b-card",[a("ol",{attrs:{type:"A"}},e._l(t.item.jawabans,(function(t,s){return a("li",{key:s},[a("label",{domProps:{innerHTML:e._s(t.jawaban_text)}}),e._v(" (point\n                        "),a("span",{staticClass:"badge badge-light"},[e._v(" "+e._s(t.point)+" ")]),e._v(" )\n                      ")])})),0)]):a("b-card",[e._v("\n                    Tidak ada pilihan jawaban\n                  ")])]}},{key:"table-busy",fn:function(){return[a("div",{staticClass:"text-center text-dark my-2"},[a("b-spinner",{staticClass:"align-middle",attrs:{variant:"dark",type:"grow",label:"Loading .."}}),e._v(" Loading\n                    ..\n                  ")],1)]},proxy:!0}])})],1),a("div",{staticClass:"row justify-content-end"},[a("div",{staticClass:"col-sm-auto"},[a("b-pagination",{attrs:{"total-rows":e.totalRows,"per-page":e.perPage},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1)])])])])])])])},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{staticClass:"text-left pl-1",attrs:{for:""}},[a("b",[e._v(" Publishers ")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{staticClass:"pl-1",attrs:{for:""}},[a("b",[e._v(" Mata Pelajaran ")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{staticClass:"pl-1",attrs:{for:""}},[a("b",[e._v(" Kategori ")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{staticClass:"pl-1",attrs:{for:""}},[a("b",[e._v(" Type ")])])}],r=(a("ac6a"),a("6b54"),a("a481"),a("96cf"),a("3b8d")),n={name:"BankSoalQuiz",data:function(){return{items:[],perPage:200,totalRows:0,isLoading:!1,token:null,pathImages:"https://storage.googleapis.com/edutore-cdn/public/module/thumb/",pathImagesQ:"https://storage.googleapis.com/edutore-cdn/public/soal/question/",pathImagesAnswer:"https://storage.googleapis.com/edutore-cdn/public/soal/answer_choice/",pathPembahasan:"https://storage.googleapis.com/edutore-cdn/public/soal/discussion/",Filterspublishers:[],matpel:[],level:[],GroupMatpel:[],GroupLevel:[],GroupPublisher:[],showD:[],attribute:["No",{key:"soal",label:"Soal text",sortable:!0,sortDirection:"desc"},{key:"images",label:"Soal Image",sortable:!0,class:"text-center"},{key:"type_soal",label:"Tipe Soal",sortable:!0,class:"text-center"},{key:"category_id",label:"Kategory",sortable:!0,class:"text-center"},{key:"matpel_id",label:"Mata pelajaran",sortable:!0,class:"text-center"},{key:"free",label:"Free"},{key:"publisher_id",label:"Publisher",sortable:!0,class:"text-center"},{key:"actions",label:"Actions"}],currentPage:1,sortBy:"",sortDesc:!1,sortDirection:"asc",filter:null,filterOn:[],isBusy:!0,Filter:null,quiz_id:null,selectMode:"multi",selected:[],search:"",totalCart:0,db:null,quizs:[],DB_NAME:"tryout",DB_VERSION:3,GroupType:[{name:"true",label:"TRIAL"},{name:"false",label:"NON TRIAL"}],type:""}},computed:{filteredList:function(){var e=this;return this.Filter?this.GroupMatpel.filter((function(t){return t._id.toLowerCase().indexOf(e.Filter.toLowerCase())>-1})):this.GroupMatpel}},watch:{currentPage:function(){var e=this.$route.query;if(console.log(e),e){var t=this.Filterspublishers,a=this.matpel,s=this.level,i=this.type;this._actionFilterSoal(t,a,s,i)}},type:function(){var e=this.$route.query;if(e){var t=this.Filterspublishers,a=this.matpel,s=this.level,i=this.type;this._actionFilterSoal(t,a,s,i)}}},mounted:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.token=sessionStorage.getItem("session_token"),t=this.$route.query.quiz_id,this.quiz_id=t,this._actionGetAll(),this._actionGetGroupmatpel(),this._actionGetGroupLevel(),this._actionGetGroupPublisher(),e.next=9,this.getDb();case 9:this.db=e.sent,this._actionCount();case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{_actionGetGroupmatpel:function(){var e=this;this.$axios.get("group/matapelajaran",{headers:{"x-access-token":this.token}}).then((function(t){"true"===t.data.success&&(e.GroupMatpel=t.data.data)})).catch((function(e){console.log(e)}))},_actionGetGroupLevel:function(){var e=this;this.$axios.get("group/level",{headers:{"x-access-token":this.token}}).then((function(t){"true"===t.data.success&&(e.GroupLevel=t.data.data)})).catch((function(e){console.log(e)}))},_actionGetGroupPublisher:function(){var e=this;this.$axios.get("group/publisher",{headers:{"x-access-token":this.token}}).then((function(t){"true"===t.data.success&&(e.GroupPublisher=t.data.data)})).catch((function(e){console.log(e)}))},_actionFilter:function(){var e=this.Filterspublishers,t=this.matpel,a=this.level,s=this.type;this._actionFilterSoal(e,t,a,s)},_actionGetAll:function(){var e=this;this.isBusy=!0,this.$axios.get("banksoal?page="+this.currentPage+"&limit="+this.perPage,{headers:{"x-access-token":this.token}}).then((function(t){var a=t.data;"true"===t.data.success&&(e.items=a.data.rows,e.totalRows=a.data.total),e.isBusy=!1})).catch((function(t){console.log(t),e.isBusy=!1}))},_actionFilterSoal:function(e,t,a,s){var i=this;this.isBusy=!0,this.$axios.get("banksoal/filter?_id=".concat(e,"&matpel=").concat(t,"&level=").concat(a,"&type=").concat(s,"&page=").concat(this.currentPage,"&limit=").concat(this.perPage),{headers:{"x-access-token":this.token}}).then((function(e){i.isBusy=!1,i.items=[],"true"===e.data.success&&(i.items=e.data.data,i.totalRows=e.data.total),i.isBusy=!1})).catch((function(e){console.log(e),i.isBusy=!1}))},_formatPrice:function(e){var t=(e/1).toFixed(0).replace(".",",");return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")},onFiltered:function(e){this.totalRows=e.length,this.currentPage=1},onRowSelected:function(e){this.selected=e},selectAllRows:function(){this.$refs.selectableTable.selectAllRows()},clearSelected:function(){this.$refs.selectableTable.clearSelected()},selectThirdRow:function(){this.$refs.selectableTable.selectRow(2)},unselectThirdRow:function(){this.$refs.selectableTable.unselectRow(2)},_actionStoredIndexedDb:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.selected,e.next=3,this._actionAddQuizToDb(t);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),_actionAddQuizToDb:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,s){var i=a.db.transaction("quizs","readwrite");i.onerror=function(e){console.log("Error Add",e),s("Error")},i.oncomplete=function(t){console.log(t),e()};var r=i.objectStore("quizs");t.forEach((function(e){console.log("Load Soal");var t=r.index("quiz_id"),a=t.get(e._id);a.onsuccess=function(){var t=a.result;void 0!==t?console.log("Data Exist"):r.put({quiz_id:e._id,value:e})},a.onerror=function(e){console.log(e)}})),a.clearSelected(),a._actionCount()})));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),_actionCount:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,a){var s=t.db.transaction(["quizs"],"readonly");s.onerror=function(e){console.log("Error Get",e),a("Error")},s.oncomplete=function(t){console.log(t),e(r)};var i=s.objectStore("quizs"),r=[];i.openCursor().onsuccess=function(e){var a=e.target.result;a&&(r.push(a.value),a.continue(),t.totalCart=r.length,console.log(r.length))}})));case 1:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),getDb:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,a){var s=window.indexedDB.open(t.DB_NAME,t.DB_VERSION);s.onerror=function(e){console.log("Error opening DB",e),a("Error")},s.onsuccess=function(t){console.log("Success Open DB"),e(t.target.result)},s.onupgradeneeded=function(e){console.log("onupgradeneeded");var t=e.target.result;if(!t.objectStoreNames.contains("quizs")&&!t.objectStoreNames.contains("ujians")){var a=t.createObjectStore("quizs",{autoIncrement:!0,keyPath:"id"}),s=t.createObjectStore("ujians",{autoIncrement:!0,keyPath:"id"});a.createIndex("quiz_id","quiz_id",{unique:!0}),s.createIndex("ujian_id","ujian_id",{unique:!0})}}})));case 1:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()}},o=n,l=(a("5324"),a("2877")),c=Object(l["a"])(o,s,i,!1,null,"7a40ee10",null);t["default"]=c.exports}}]);
//# sourceMappingURL=chunk-59aa21f0.f9e72005.js.map