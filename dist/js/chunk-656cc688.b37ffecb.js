(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-656cc688"],{3846:function(t,e,a){a("9e1e")&&"g"!=/./g.flags&&a("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:a("0bfb")})},"6b54":function(t,e,a){"use strict";a("3846");var s=a("cb7c"),n=a("0bfb"),r=a("9e1e"),i="toString",o=/./[i],l=function(t){a("2aba")(RegExp.prototype,i,t,!0)};a("79e5")((function(){return"/a/b"!=o.call({source:"a",flags:"b"})}))?l((function(){var t=s(this);return"/".concat(t.source,"/","flags"in t?t.flags:!r&&t instanceof RegExp?n.call(t):void 0)})):o.name!=i&&l((function(){return o.call(this)}))},"763f":function(t,e,a){"use strict";var s=a("e7cd"),n=a.n(s);n.a},"9ad3":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-2 card p-0 fixed",staticStyle:{"max-height":"450px"}},[a("form",[t._m(0),a("div",{staticClass:"ml-1 mb-2"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.Filter,expression:"Filter"}],attrs:{type:"text"},domProps:{value:t.Filter},on:{input:function(e){e.target.composing||(t.Filter=e.target.value)}}})]),a("div",{staticClass:"col-sm-12",staticStyle:{"max-height":"250px",overflow:"auto"}},t._l(t.filteredList,(function(e){return a("div",{key:e._id},[a("li",{staticStyle:{"list-style":"none"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.matpel,expression:"matpel"}],attrs:{type:"checkbox"},domProps:{value:e._id,checked:Array.isArray(t.matpel)?t._i(t.matpel,e._id)>-1:t.matpel},on:{change:[function(a){var s=t.matpel,n=a.target,r=!!n.checked;if(Array.isArray(s)){var i=e._id,o=t._i(s,i);n.checked?o<0&&(t.matpel=s.concat([i])):o>-1&&(t.matpel=s.slice(0,o).concat(s.slice(o+1)))}else t.matpel=r},t._actionFilter]}}),t._v("\n                "+t._s(e._id)+" ("+t._s(e.count)+")\n              ")])])})),0),a("hr"),t._m(1),a("div",{staticClass:"col-md-12",staticStyle:{"max-height":"200px",overflow:"auto"}},t._l(t.GroupLevel,(function(e){return a("div",{key:e._id,staticStyle:{"margin-left":"0"}},[a("li",{staticStyle:{"list-style":"none"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.level,expression:"level"}],attrs:{type:"checkbox"},domProps:{value:e._id,checked:Array.isArray(t.level)?t._i(t.level,e._id)>-1:t.level},on:{change:[function(a){var s=t.level,n=a.target,r=!!n.checked;if(Array.isArray(s)){var i=e._id,o=t._i(s,i);n.checked?o<0&&(t.level=s.concat([i])):o>-1&&(t.level=s.slice(0,o).concat(s.slice(o+1)))}else t.level=r},t._actionFilter]}}),t._v("\n                "+t._s(e._id)+" ("+t._s(e.count)+")\n              ")])])})),0)])]),a("div",{staticClass:"col-md-10"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-body"},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"form-group row"},[a("div",{staticClass:"col-sm"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"form-control form-control-sm",attrs:{type:"text",placeholder:"Cari disini"},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}})]),a("div",{staticClass:"col-sm-auto"},[a("router-link",{staticClass:"btn btn-sm",attrs:{to:{path:"/p/quiz/cart-soal-quiz",query:{_id:t.quiz_id}}}},[t._v("\n                    Cart Soal\n                    "),a("i",{staticClass:"fa fa-cart-arrow-down"}),a("span",{staticClass:"badge badge-pill badge-success"},[t._v(" "+t._s(t.totalCart))])])],1)]),t.selected.length>0?a("div",{staticClass:"row"},[a("div",{},[t._v("\n                  Di Pilih "),a("b",[t._v(" "+t._s(t.selected.length)+" ")]),a("button",{staticClass:"btn btn-sm btn-success",on:{click:t.actionStoredIndexedDB}},[a("i",{staticClass:"fa fa-send"}),t._v(" Proses\n                  ")])]),a("div",{staticClass:"ml-2"},[a("button",{staticClass:"btn btn-sm btn-danger",on:{click:t.clearSelected}},[a("i",{staticClass:"fa fa-times"}),t._v(" Buang Semua\n                  ")])])]):t._e()]),a("div",{staticClass:"row justify-content-end"},[a("div",{staticClass:"col-sm-auto"},[a("label",{staticClass:"text-bold",attrs:{for:""}},[t._v("\n                  Total Soal "),a("b",[t._v(" "+t._s(t._formatPrice(t.totalRows))+" ")])])])]),a("div",[a("b-table",{ref:"selectableTable",attrs:{selectable:"","select-mode":t.selectMode,"show-empty":"",small:"","sticky-header":"","head-variant":"dark",responsive:"",items:t.items,fields:t.attribute,"current-page":t.currentPage,filter:t.filter,filterIncludedFields:t.filterOn,"sort-by":t.sortBy,"sort-desc":t.sortDesc,"sort-direction":t.sortDirection,busy:t.isBusy},on:{"row-selected":t.onRowSelected,"update:sortBy":function(e){t.sortBy=e},"update:sort-by":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},"update:sort-desc":function(e){t.sortDesc=e},filtered:t.onFiltered},scopedSlots:t._u([{key:"cell(No)",fn:function(e){return[t._v("\n                  "+t._s((t.currentPage-1)*t.perPage+(e.index+1))+"\n                ")]}},{key:"cell(soal)",fn:function(e){return[e.item.soal_text?a("div",[a("p",{domProps:{innerHTML:t._s(e.item.soal_text)}})]):t._e()]}},{key:"cell(images)",fn:function(e){return[e.item.soal_image?a("div",[e.item.soal_image?a("img",{directives:[{name:"lazy",rawName:"v-lazy.container",value:t.pathImagesQ+e.item.soal_image,expression:"pathImagesQ + data.item.soal_image",modifiers:{container:!0}}],staticStyle:{heigth:"60pxwidth:auto","max-width":"200px"},attrs:{alt:e.item.soal_image,srcset:""}}):t._e()]):t._e()]}},{key:"cell(actions)",fn:function(t){return[a("b-button",{attrs:{size:"sm"},on:{click:t.toggleDetails}},[a("i",{staticClass:"fa fa-angle-down"})])]}},{key:"row-details",fn:function(e){return[e.item.jawabans.length>0?a("b-card",[a("ol",{attrs:{type:"A"}},t._l(e.item.jawabans,(function(e,s){return a("li",{key:s},[a("label",{domProps:{innerHTML:t._s(e.jawaban_text)}}),t._v(" (point\n                        "),a("span",{staticClass:"badge badge-light"},[t._v(" "+t._s(e.point)+" ")]),t._v(" )\n                      ")])})),0)]):a("b-card",[t._v("\n                    Tidak ada pilihan jawaban\n                  ")])]}},{key:"table-busy",fn:function(){return[a("div",{staticClass:"text-center text-dark my-2"},[a("b-spinner",{staticClass:"align-middle",attrs:{variant:"dark",type:"grow",label:"Loading .."}}),t._v("\n                    Loading ..\n                  ")],1)]},proxy:!0}])})],1),a("div",{staticClass:"row justify-content-end"},[a("div",{staticClass:"col-sm-auto"},[a("b-pagination",{attrs:{"total-rows":t.totalRows,"per-page":t.perPage},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)])])])])])])])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{staticClass:"pl-1",attrs:{for:""}},[a("b",[t._v(" Mata Pelajaran ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{staticClass:"pl-1",attrs:{for:""}},[a("b",[t._v(" Kategori ")])])}],r=(a("ac6a"),a("6b54"),a("a481"),a("96cf"),a("3b8d")),i={name:"BankSoalQuizPublisher",data:function(){return{items:[],perPage:200,totalRows:0,isLoading:!1,token:null,pathImages:"https://storage.googleapis.com/edutore-cdn/public/module/thumb/",pathImagesQ:"https://storage.googleapis.com/edutore-cdn/public/soal/question/",pathImagesAnswer:"https://storage.googleapis.com/edutore-cdn/public/soal/answer_choice/",pathPembahasan:"https://storage.googleapis.com/edutore-cdn/public/soal/discussion/",Filterspublishers:[],matpel:[],level:[],GroupMatpel:[],GroupLevel:[],GroupPublisher:[],showD:[],attribute:["No",{key:"soal",label:"Soal text",sortable:!0,sortDirection:"desc"},{key:"images",label:"Soal Image",sortable:!0,class:"text-center"},{key:"type_soal",label:"Tipe Soal",sortable:!0,class:"text-center"},{key:"category_id",label:"Kategory",sortable:!0,class:"text-center"},{key:"matpel_id",label:"Mata pelajaran",sortable:!0,class:"text-center"},{key:"publisher_id",label:"Publisher",sortable:!0,class:"text-center"},{key:"actions",label:"Actions"},{key:"pilih",label:"Pilih"}],currentPage:1,sortBy:"",sortDesc:!1,sortDirection:"asc",filter:null,filterOn:[],isBusy:!0,Filter:null,quiz_id:null,selectMode:"multi",selected:[],search:"",totalCart:0,DB_NAME:"soal_quiz",DB_VERSION:3,db:null}},watch:{currentPage:function(){if(this.$route.query.matpel||this.$route.query.level){var t=this.$route.query.matpel?this.$route.query.matpel:null,e=this.$route.query.level?this.$route.query.level:null;this._actionQuerySoal(t,e)}else console.log("get all"),this._actionGetAll()}},computed:{filteredList:function(){var t=this;return this.Filter?this.GroupMatpel.filter((function(e){return e._id.toLowerCase().indexOf(t.Filter.toLowerCase())>-1})):this.GroupMatpel}},mounted:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.token=sessionStorage.getItem("session_token"),e=this.$route.query.quiz_id,this.quiz_id=e,this._actionGetAll(),t.next=6,this.getDb();case 6:this.db=t.sent;case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),methods:{_actionGetGroupmatpel:function(){var t=this;this.$axios.get("group/matapelajaran",{headers:{"x-access-token":this.token}}).then((function(e){"true"===e.data.success&&(t.GroupMatpel=e.data.data)})).catch((function(t){console.log(t)}))},_actionGetGroupLevel:function(){var t=this;this.$axios.get("group/level",{headers:{"x-access-token":this.token}}).then((function(e){"true"===e.data.success&&(t.GroupLevel=e.data.data)})).catch((function(t){console.log(t)}))},_actionFilter:function(){var t=this.Filterspublishers,e=this.matpel,a=this.level;this._acrtionFilterSoal(t,e,a)},_actionGetAll:function(){var t=this;this.isBusy=!0,this.$axios.get("publisher-banksoals?page=".concat(this.currentPage,"&limit=").concat(this.perPage),{headers:{"x-access-token":this.token}}).then((function(e){var a=e.data;"true"===e.data.success&&(t.items=a.data,t.totalRows=a.total,t.GroupMatpel=a.matpel_id,t.GroupLevel=a.category_id),t.isBusy=!1})).catch((function(e){console.log(e),t.isBusy=!1}))},_acrtionFilterSoal:function(t,e,a){var s=this;this.isBusy=!0,this.$axios.get("publisher-banksoals/filter?_id=".concat(t,"&matpel=").concat(e,"&level=").concat(a,"&page=").concat(this.currentPage,"&limit=").concat(this.perPage),{headers:{"x-access-token":this.token}}).then((function(t){s.isBusy=!1,s.items=[],"true"===t.data.success&&(s.items=t.data.data,s.totalRows=t.data.total),s.isBusy=!1})).catch((function(t){console.log(t),s.isBusy=!1}))},_actionQuerySoal:function(t,e){var a=this;t?(t&&e&&this._acrtionFilterSoal(t,e),this.isBusy=!0,this.$axios.get("publisher-banksoals/filter?&matpel=".concat(t,"&page=").concat(this.currentPage,"&limit=").concat(this.perPage),{headers:{"x-access-token":this.token}}).then((function(t){a.isBusy=!1,a.items=[],"true"===t.data.success&&(a.items=t.data.data,a.totalRows=t.data.total,a.GroupMatpel=t.data.matpel_id?t.data.matpel_id:null,a.GroupLevel=t.data.category_id),a.isBusy=!1})).catch((function(t){console.log(t),a.isBusy=!1}))):e&&(e&&t?this._acrtionFilterSoal(t,e):(this.isBusy=!0,this.$axios.get("publisher-banksoals/filter?&level=".concat(e,"&page=").concat(this.currentPage,"&limit=").concat(this.perPage),{headers:{"x-access-token":this.token}}).then((function(t){a.isBusy=!1,a.items=[],"true"===t.data.success&&(a.items=t.data.data,a.totalRows=t.data.total,a.GroupMatpel=t.data.matpel_id?t.data.matpel_id:null,a.GroupLevel=t.data.category_id),a.isBusy=!1})).catch((function(t){console.log(t),a.isBusy=!1}))))},_formatPrice:function(t){var e=(t/1).toFixed(0).replace(".",",");return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")},onFiltered:function(t){this.totalRows=t.length,this.currentPage=1},onRowSelected:function(t){this.selected=t},selectAllRows:function(){this.$refs.selectableTable.selectAllRows()},clearSelected:function(){this.$refs.selectableTable.clearSelected()},selectThirdRow:function(){this.$refs.selectableTable.selectRow(2)},unselectThirdRow:function(){this.$refs.selectableTable.unselectRow(2)},actionStoredIndexedDB:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.selected,t.next=3,this.addQuizToDb(e);case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),addQuizToDb:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,s){var n=a.db.transaction("quizs","readwrite");n.onerror=function(t){console.log("Error Add",t),s("Error")},n.oncomplete=function(e){console.log(e),t()};var r=n.objectStore("quizs");e.forEach((function(t){console.log("load soal ");var e=a,s=r.index("soal_id"),n=s.get(t._id);n.onsuccess=function(){var a=n.result;if(void 0!==a)console.log("data exist");else{r.put({soal_id:t._id,value:t});var s=r.count();s.onsuccess=function(){e.totalCart=s.result,console.log(e.totalCart)}}},n.onerror=function(t){console.log(t)}})),a.clearSelected(),a.coutIndexDb(r)})));case 1:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),listSoalCart:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.db.transaction("quizs","readwrite").objectStore("quizs");case 2:e=t.sent,e.onerror=function(t){console.log("Error Add",t)},e.oncomplete=function(t){console.log(t)},e.openCursor().onsuccess=function(t){var e=t.target.result;e?(console.log("Name for SSN "+e.key+" is "+JSON.stringify(e.value)),e.continue()):console.log("No more entries!")};case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),coutIndexDb:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.log("count indexDB"),a=this,s=e.count(),s.onsuccess=function(){console.log(s.result),a.totalCart=s.result};case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),getDb:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,a){var s=window.indexedDB.open(e.DB_NAME,e.DB_VERSION);window.indexedDB||alert("Browser anda tidak mendukung IndexDB"),s.onerror=function(t){console.log("Error opening DB",t),a("Error")},s.onsuccess=function(a){console.log("Success Open DB"),t(a.target.result);var n=s.result,r=n.transaction("quizs","readwrite"),i=r.objectStore("quizs");e.coutIndexDb(i)},s.onupgradeneeded=function(t){console.log("onupgradeneeded");var e=t.target.result;if(!e.objectStoreNames.contains("quizs")){var a=e.createObjectStore("quizs",{autoIncrement:!0,keyPath:"id"});a.createIndex("soal_id","soal_id",{unique:!0})}}})));case 1:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()}},o=i,l=(a("763f"),a("2877")),c=Object(l["a"])(o,s,n,!1,null,"ca93648c",null);e["default"]=c.exports},a481:function(t,e,a){"use strict";var s=a("cb7c"),n=a("4bf8"),r=a("9def"),i=a("4588"),o=a("0390"),l=a("5f1b"),c=Math.max,u=Math.min,d=Math.floor,p=/\$([$&`']|\d\d?|<[^>]*>)/g,h=/\$([$&`']|\d\d?)/g,f=function(t){return void 0===t?t:String(t)};a("214f")("replace",2,(function(t,e,a,g){return[function(s,n){var r=t(this),i=void 0==s?void 0:s[e];return void 0!==i?i.call(s,r,n):a.call(String(r),s,n)},function(t,e){var n=g(a,t,this,e);if(n.done)return n.value;var d=s(t),p=String(this),h="function"===typeof e;h||(e=String(e));var m=d.global;if(m){var b=d.unicode;d.lastIndex=0}var _=[];while(1){var y=l(d,p);if(null===y)break;if(_.push(y),!m)break;var w=String(y[0]);""===w&&(d.lastIndex=o(p,r(d.lastIndex),b))}for(var x="",k=0,S=0;S<_.length;S++){y=_[S];for(var C=String(y[0]),B=c(u(i(y.index),p.length),0),P=[],R=1;R<y.length;R++)P.push(f(y[R]));var D=y.groups;if(h){var $=[C].concat(P,B,p);void 0!==D&&$.push(D);var q=String(e.apply(void 0,$))}else q=v(C,p,B,P,D,e);B>=k&&(x+=p.slice(k,B)+q,k=B+C.length)}return x+p.slice(k)}];function v(t,e,s,r,i,o){var l=s+t.length,c=r.length,u=h;return void 0!==i&&(i=n(i),u=p),a.call(o,u,(function(a,n){var o;switch(n.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,s);case"'":return e.slice(l);case"<":o=i[n.slice(1,-1)];break;default:var u=+n;if(0===u)return a;if(u>c){var p=d(u/10);return 0===p?a:p<=c?void 0===r[p-1]?n.charAt(1):r[p-1]+n.charAt(1):a}o=r[u-1]}return void 0===o?"":o}))}}))},e7cd:function(t,e,a){}}]);
//# sourceMappingURL=chunk-656cc688.b37ffecb.js.map